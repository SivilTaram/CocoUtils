# CocoUtils #

CocoUtils是针对计算机组成原理实验所做的一组辅助工具，帮助加快本地调试过程。
这套工具力求通过模块化，使得其中的部分工具不仅可以用于我航的计算机组成实验，
同时可以应用于其他 **实践类课程** 。

# 本地评测工具（cjudge） #

支持多测试数据支持，输入输出自动对比的本地测试工具。

## 输入/输出数据 ##

输入方面支持设置文件输入、标准输入、命令行参数输入三种形式输入形式。
输出方面支持文件输出、标准输出两种形式。

通过参数`--file-input 文件名`来指定用于文件输入的文件名。
可以输入多个输入文件名，例如：

```
    cjudge --file-input file_a.txt --file-input file_b.txt
```

通过参数`--std-input 文件名`来指定用于标准输入的文件名。
*注意：仅能指定一个文件名*

通过参数`--arg-input 文件名`来指定命令行输入，也仅能指定一个文件名

通过参数`--file-output 文件名`来指定文件输出的文件名。参数
`--std-output 文件名`来指定标准输出文件名。具体要求与对输入文件
的要求一致。

通过参数`--test-case-dir 路径`来指定测试数据目录。
参数`-r,-R,--recursive`（三者皆可）表明需要递归解析测试数据目录

对于测试数据，cjudge会进入测试数据目录，
根据设定的输入输出文件名来找到对应的测试用例。

cjudge会将输入输出文件名拆分为文件名称和扩展名两部分（如果可以的话），
并搜索所有以该文件名称作为前缀且扩展名相同的所有文件。
假设输入文件名为aaa.bb，则cjudge会找到所有aaaXXX.bb的文件（其中XXX为任意字符）。
cjudge会将所有XXX位置字符相同的文件认为是一组测试数据，每次测试时，
依次将所有组数据测试一遍。

## 评测功能 ##
对于每组数据，cjudge会将对应组数据拷贝到待测程序目录下，并重命名为指定的
输入输出文件名（即文件名中去掉XXX部分）。之后执行测试程序。对比程序输出和
测试数据是否一致，若一致输出“Accepted”。
否则输出“Failed”，并给出第一处不一样的位置的对比。

通过输入`--command 程序名`来指定待测程序名。

通过输入`--timeout 秒钟数`可以指定待测程序的时间限制。超过时限程序将被自动停止。

## 评测配置文件 ##
由于参数较多，每次都重新指定较为麻烦。cjudge支持使用配置文件配置评测功能。
通过`-c 配置文件名`或`--config 配置文件名`可以指定配置文件。
**如果未指定，cjudge会默认以当前工作目录下的cjudge.conf.ini作为配置文件名**
这样可以使第一次运行cjudge（带参数）后，再次测试只用直接执行cjudge即可，便于使用。

cjudge会先解析配置文件内容，如果配置文件内容与命令行参数有所不同，将使用命令行
参数内容覆盖配置文件内容。这样设计是为了便于更新配置文件内容。通过修改传参，
即可间接修改配置文件内容，更为方便。

*注意：读取配置文件时均会对其进行重新写入，便于更新。*
